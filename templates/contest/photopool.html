{% extends 'base.html' %}
{% load static %}
{% load ratings %}
{% load checkandincrease %}


{% block title %}Photo pool{% endblock %}


{% block body %}

<div style="margin-top: 100px; position: relative;" class="container justify-content-center align-items-center">
     <div class="section-title text-center">
        <h3>Photo pool</h3>
     </div>

   <div class="slide-control-2" id="control-1"></div>
   <div class="owl-carousel owl-theme card-slider text-center">

    {% for photo in photos %}

       <div class="card-body">
           <a href="{{ photo.photoItself.url }}" data-fancybox data-caption="My caption">
            <img class="card-img-top" src="{{ photo.photoItself.url }}">
           </a>
            <div class="card-block text-center">
                <p>Click on image to see its original size.</p>
                <h4 class="card-title">Photo tag: {{ photo.contest.tag }} </h4>
                {% ratings photo %} <br>
                <br>
                <form style="display: inline;" onclick="report('{{ photo.id }}', event)">
                    <input class="btn btn-danger btn-lg" type="submit" value="Report" >
                </form>
            </div>
       </div>

   {% endfor %}

   </div>
</div>

<script>

    function report(photoId, event){
        var url = "http://127.0.0.1:8000/api/report-photo/" + photoId;
        event.preventDefault();
        $.ajax({
            url: url,
            type: "GET",
            success: function(result){
                alert('Successfuly reported this photo.');
            },
            error: function(result){
                alert('error' + result);
            }
        })
    }

</script>

{% endblock %}

